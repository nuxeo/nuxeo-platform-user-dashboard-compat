<?xml version="1.0"?>

<component name="org.nuxeo.ecm.webapp.user.dashboard.compat.querymodels">

  <extension
    target="org.nuxeo.ecm.core.search.api.client.querymodel.QueryModelService"
    point="model">

    <queryModel name="USER_DOMAINS">
      <pattern>
        SELECT * FROM Document WHERE ecm:primaryType = 'Domain' AND
        ecm:mixinType != 'HiddenInNavigation' AND ecm:currentLifeCycleState !=
        'deleted'
      </pattern>
      <sortable value="true" defaultSortColumn="dc:title"
        defaultSortAscending="true" />
    </queryModel>

    <queryModel name="DOMAIN_DOCUMENTS">
      <pattern>
        SELECT * FROM Document WHERE ecm:path STARTSWITH ? AND NOT ecm:path
        STARTSWITH ? AND ecm:mixinType != 'Folderish' AND ecm:mixinType !=
        'HiddenInNavigation' AND ecm:isCheckedInVersion = 0 AND ecm:isProxy = 0
        AND ecm:currentLifeCycleState != 'deleted'
      </pattern>
      <sortable value="true" defaultSortColumn="dc:modified"
        defaultSortAscending="false" />
      <max>5</max>
    </queryModel>

    <queryModel name="DOMAIN_PUBLISHED_DOCUMENTS">
      <pattern>
        SELECT * FROM Document WHERE ecm:path STARTSWITH ? AND ecm:mixinType !=
        'Folderish' AND ecm:mixinType != 'HiddenInNavigation' AND
        ecm:isCheckedInVersion = 0 AND ecm:isProxy = 1
      </pattern>
      <sortable value="true" defaultSortColumn="dc:modified"
        defaultSortAscending="false" />
      <max>5</max>
    </queryModel>

    <queryModel name="USER_DOCUMENTS">
      <pattern>
        SELECT * FROM Document WHERE dc:contributors = ? AND ecm:mixinType !=
        'Folderish' AND ecm:mixinType != 'HiddenInNavigation' AND
        ecm:isCheckedInVersion = 0 AND ecm:isProxy = 0 AND
        ecm:currentLifeCycleState != 'deleted' AND ecm:path STARTSWITH ?
      </pattern>
      <sortable value="true" defaultSortColumn="dc:modified"
        defaultSortAscending="false" />
      <max>5</max>
    </queryModel>

    <queryModel name="USER_SECTIONS">
      <pattern>
        SELECT * FROM Document WHERE ecm:primaryType = 'Section' AND
        ecm:mixinType != 'HiddenInNavigation' AND ecm:path STARTSWITH ?
      </pattern>
      <sortable value="true" defaultSortColumn="dc:title"
        defaultSortAscending="true" />
      <max>5</max>
    </queryModel>

    <queryModel name="USER_DELETED_DOCUMENTS">
      <pattern>
        SELECT * FROM Document WHERE dc:contributors = ? AND ecm:mixinType !=
        'Folderish' AND ecm:mixinType != 'HiddenInNavigation' AND
        ecm:isCheckedInVersion = 0 AND ecm:isProxy = 0 AND
        ecm:currentLifeCycleState = 'deleted'
      </pattern>
      <sortable value="true" defaultSortColumn="dc:modified"
        defaultSortAscending="false" />
      <max>5</max>
    </queryModel>

    <queryModel name="USER_WORKSPACES">
      <pattern>
        SELECT * FROM Workspace WHERE ecm:mixinType != 'HiddenInNavigation' AND
        ecm:currentLifeCycleState != 'deleted' AND ecm:isProxy = 0 AND ecm:path
        STARTSWITH ? AND NOT ecm:path STARTSWITH ?
      </pattern>
      <sortable value="true" defaultSortColumn="dc:title"
        defaultSortAscending="true" />
      <max>5</max>
    </queryModel>

    <queryModel name="USER_SITES">
      <pattern>
        SELECT * FROM Document WHERE ecm:mixinType = 'WebView' AND
        ecm:currentLifeCycleState != 'deleted' AND webc:isWebContainer = 1 AND
        ecm:path STARTSWITH ? AND NOT ecm:path STARTSWITH ?
      </pattern>
      <sortable value="true" defaultSortColumn="webc:name"
        defaultSortAscending="true" />
      <max>5</max>
    </queryModel>

  </extension>

</component>
